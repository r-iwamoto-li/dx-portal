<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DX PORTAL - Legacy Splash</title>
<style>
/* ===== ベース（全面） ===== */
html,body{height:100%;margin:0}
body{
  font:14px/1.6 "MS UI Gothic","MS Sans Serif",system-ui,sans-serif;
  color:#000; background:#fff; overflow:hidden;
}

/* ===== CRT劣化・汚れ演出（常時） ===== */
.crt{
  position:fixed; inset:0; pointer-events:none; z-index:2;
  background:
    radial-gradient(ellipse at center, rgba(0,0,0,0) 60%, rgba(0,0,0,.18) 95%),
    repeating-linear-gradient(0deg, rgba(0,0,0,.06) 0 2px, rgba(255,255,255,0) 3px 4px);
  mix-blend-mode:multiply;
}
.noise{
  position:fixed; inset:0; pointer-events:none; z-index:1;
  opacity:.09; background:
    url('data:image/svg+xml;utf8,\
      <svg xmlns="http://www.w3.org/2000/svg" width="140" height="140">\
        <filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/></filter>\
        <rect width="100%" height="100%" filter="url(%23n)" opacity="0.6"/>\
      </svg>') 0 0/240px 240px repeat;
  animation:grain 7s steps(10) infinite;
}
@keyframes grain{
  0%{transform:translate(0,0)}25%{transform:translate(-10px,6px)}
  50%{transform:translate(8px,-12px)}75%{transform:translate(-6px,8px)}
  100%{transform:translate(0,0)}
}

/* ===== 画面レイアウト（90s大盛り） ===== */
#desk{position:fixed; inset:0; display:grid; grid-template-rows:auto 1fr auto; z-index:0}
.banner{
  background:#000080;color:#fff; padding:6px 10px; font-weight:700;
  display:flex; gap:10px; align-items:center; justify-content:space-between;
  box-shadow:inset 0 -2px 0 rgba(255,255,255,.25);
}
.banner .marq{white-space:nowrap; overflow:hidden}
.banner .marq span{display:inline-block; padding-left:100%; animation:marq 22s linear infinite}
@keyframes marq{100%{transform:translateX(-100%)}}
.nav{
  display:flex; gap:8px; align-items:center
}
.nav a{
  color:#fff; text-decoration:none; background:#1a45c5; padding:3px 8px; border:2px outset #7da3ff;
}
.nav a:hover{filter:brightness(1.1)}
.counter{font-weight:700}

.main{
  display:grid; grid-template-columns:260px 1fr 300px; gap:10px; padding:10px;
}
.box{
  background:#f8f8f8; border:3px groove #c0c0c0; padding:10px; min-height:0; overflow:auto;
}
.box h3{margin:0 0 6px; font-size:16px; border-bottom:2px inset #c0c0c0; padding-bottom:4px}
a.fake{color:#00f; text-decoration:underline}
a.fake:hover{text-decoration:none}
label,input,select,button{font:inherit}
input[type="text"]{border:2px inset #fff; padding:2px 4px; width:100%; background:#fff}
button.btn98{
  margin-top:6px; padding:6px 12px; background:#e0e0e0; color:#000; cursor:default;
  border:3px outset #fff; box-shadow:inset -2px -2px #808080, inset 2px 2px #fff;
}
button.btn98:hover{filter:brightness(1.05)}
button.btn98:active{border:3px inset #fff}
button[disabled]{opacity:.8; cursor:not-allowed}

/* 右カラム：バナー風/ステータス */
.badge{
  display:inline-block; font-weight:700; background:#ff0; border:2px ridge #c0c000; padding:0 6px
}
.kpi{display:grid; grid-template-columns:120px 1fr; gap:4px 8px; font-size:13px}
.kpi div:nth-child(odd){font-weight:700}

/* 下フッタ */
.foot{
  background:#f0f0f0; border-top:3px ridge #c0c0c0; padding:6px 10px; text-align:center
}

/* ===== クラッシュ演出（glitch-onで発火） ===== */
.fx{position:fixed; inset:0; pointer-events:none; z-index:5}
.fx .bars{
  position:absolute; inset:0; opacity:0;
  background:
    repeating-linear-gradient(0deg,
      rgba(255,0,0,.24) 0 2px,
      rgba(0,0,0,.2) 3px 4px,
      rgba(0,60,255,.24) 5px 6px,
      transparent 7px 10px);
  animation:barsMove 1.1s linear infinite;
}
@keyframes barsMove{from{background-position-y:0}to{background-position-y:220px}}
.fx .scan{
  position:absolute; inset:0; opacity:0;
  background:linear-gradient(transparent 50%, rgba(0,0,0,.1) 51%); background-size:100% 4px;
}
.fx .cracks{
  position:absolute; inset:0; opacity:0; background:
    url('data:image/svg+xml;utf8,\
      <svg xmlns="http://www.w3.org/2000/svg" viewBox=\"0 0 1000 600\">\
        <g stroke=\"black\" stroke-width=\"2\" fill=\"none\" opacity=\"0.55\">\
          <path d=\"M30,120 120,150 200,120 300,180 360,160 440,200 500,180 580,210 680,170 780,220\"/>\
          <path d=\"M200,320 240,300 280,340 340,310 400,355 450,330 500,360 580,330 660,360 740,340\"/>\
          <path d=\"M480,30 490,120 520,160 540,220 560,300 600,360\"/>\
        </g>\
      </svg>') center/cover no-repeat;
}
body.glitch-on .fx .bars{opacity:.85}
body.glitch-on .fx .scan{opacity:.6}
body.glitch-on .fx .cracks{opacity:.9}

/* ===== Win98 風ポップ（複数/傾きなし） ===== */
.err98{
  position:fixed; z-index:8; width:300px; background:#c0c0c0; border:3px outset #fff; color:#000;
  box-shadow:0 12px 24px rgba(0,0,0,.35); transform:translate(-50%,-50%);
}
.err98 .title{background:#000080;color:#fff;padding:3px 6px;font-weight:700;font-size:13px}
.err98 .inner{background:#f0f0f0;border:3px ridge #c0c0c0;padding:10px}
.err98 .row{display:flex; align-items:center; gap:10px}
.xmark{width:18px;height:18px;background:#d00;color:#fff;border-radius:50%; display:grid;place-items:center;font-weight:900}
.btnbar{margin-top:10px; display:flex; gap:8px; justify-content:flex-end}
.small{font-size:12px; color:#333}

/* ===== 最後の確認モーダル ===== */
.modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:10}
.modal.show{display:flex}
.win98{min-width:320px; background:#c0c0c0; border:3px outset #fff; color:#000; box-shadow:0 20px 40px rgba(0,0,0,.35)}
.titlebar{background:#000080;color:#fff;padding:4px 8px;font-weight:700;display:flex;align-items:center;justify-content:space-between}
.titlebar .minibox{width:14px;height:14px;background:#c0c0c0;border:2px outset #fff}
.dialog{background:#f0f0f0;border:3px ridge #c0c0c0;padding:12px}
.btnrow{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}
.btn98{font:700 13px/1 "MS Sans Serif"; padding:6px 14px; background:#e0e0e0; color:#000; border:3px outset #fff; box-shadow:inset -2px -2px #808080, inset 2px 2px #fff; cursor:pointer}
.btn98:active{border:3px inset #fff}

/* レスポンシブ */
@media (max-width:1100px){ .main{grid-template-columns:1fr 1fr} }
@media (max-width:760px){ .main{grid-template-columns:1fr} .err98{width:86vw} }
</style>
</head>
<body>

<!-- 画面本体（ダミーDXポータル：使い古し感マシマシ） -->
<div id="desk">
  <div class="banner">
    <div class="nav">
      <a href="#" onclick="return false">HOME</a>
      <a href="#" onclick="return false">プロジェクト</a>
      <a href="#" onclick="return false">ナレッジ</a>
      <a href="#" onclick="return false">掲示板</a>
    </div>
    <div class="marq"><span>【重要】Internet Explorer 5.0をご利用の方へ：ActiveXの設定を更新してください —— DX Innovation News</span></div>
    <div class="counter">Visitors: 001,294,882</div>
  </div>

  <div class="main">
    <!-- 左：クイックリンク & サーチ -->
    <aside class="box">
      <h3>クイックリンク</h3>
      <ul style="margin:0 0 10px 18px">
        <li><a class="fake" href="#" onclick="return false">経営ダッシュボード</a></li>
        <li><a class="fake" href="#" onclick="return false">SFA入力マニュアル（Word97）</a></li>
        <li><a class="fake" href="#" onclick="return false">在庫一覧（CSV）</a></li>
        <li><a class="fake" href="#" onclick="return false">勤怠入力（要ActiveX）</a></li>
      </ul>
      <h3>サイト内検索</h3>
      <label for="q">キーワード：</label>
      <input id="q" type="text" placeholder="例）売上 日次" />
      <button class="btn98" disabled>検索</button>
      <p class="small">※検索は現在メンテナンス中です。</p>
    </aside>

    <!-- 中央：更新履歴 & お知らせ -->
    <main class="box">
      <h3>DXポータル（レガシー版）</h3>
      <p>長年ご利用ありがとうございます。資産の都合により機能の一部を縮小して運用しています。最新DXポータルは別系統にて提供中です。</p>

      <h3>更新履歴</h3>
      <ul style="margin:0 0 10px 18px">
        <li>2000-02-14 コンテンツミラーリング開始（夜間のみ）</li>
        <li>1999-10-01 KPIレポートに“交通費”項目を追加</li>
        <li>1999-07-07 BBSのスパム対策を実施（英数字のみ）</li>
        <li>1998-12-24 年末年始の運用体制について</li>
      </ul>

      <h3>お知らせ</h3>
      <div style="display:grid; gap:8px">
        <div style="background:#ffffcc; border:2px ridge #c0c000; padding:6px"><strong>注意：</strong> Netscape Navigator 4.7では一部表示が崩れます。</div>
        <div style="background:#e6f2ff; border:2px ridge #98b2e6; padding:6px">新入社員向けオンボーディング資料（PowerPoint 97）を公開しました。</div>
      </div>
    </main>

    <!-- 右：システム稼働状況/簡易KPI/広告風 -->
    <aside class="box">
      <h3>システム稼働状況</h3>
      <div class="kpi">
        <div>会計DWH</div><div>稼働中（遅延 12分）</div>
        <div>SFA</div><div>稼働中（警告）</div>
        <div>在庫DB</div><div>バックアップ中</div>
        <div>人事基盤</div><div>稼働中</div>
      </div>
      <h3 style="margin-top:10px">KPI（参考）</h3>
      <div class="kpi">
        <div>今月売上</div><div>¥ 128,443,200</div>
        <div>粗利率</div><div>34.1 %</div>
        <div>案件進捗</div><div>75 %</div>
      </div>
      <h3 style="margin-top:10px">スポンサー</h3>
      <div style="display:grid; gap:6px">
        <div style="background:#fff; border:3px outset #fff; padding:8px; text-align:center">🎉 <span class="badge">NEW</span> 社内掲示板 v2.0 β</div>
        <div style="background:#fff; border:3px outset #fff; padding:8px; text-align:center">📦 配送トラッキング（要Java）</div>
      </div>
    </aside>
  </div>

  <div class="foot">Copyright © 1998–2000 DX Portal — All rights reserved.</div>
</div>

<!-- クラッシュ・グリッチ（オーバーレイ） -->
<div class="fx">
  <div class="bars"></div>
  <div class="scan"></div>
  <div class="cracks"></div>
</div>
<div class="noise"></div>
<div class="crt"></div>

<!-- 最終確認モーダル -->
<div id="popup" class="modal" aria-hidden="true">
  <div class="win98" role="dialog" aria-modal="true" aria-labelledby="ttl">
    <div class="titlebar"><span id="ttl">Microsoft Windows</span><span class="minibox" aria-hidden="true"></span></div>
    <div class="dialog">
      <p>DXポータルの最新バージョンに接続します。よろしいですか？</p>
      <div class="btnrow">
        <button id="ok" class="btn98">OK</button>
        <button id="cancel" class="btn98">Cancel</button>
      </div>
    </div>
  </div>
</div>

<script>
/* ===== 遷移先設定 ===== */
const DEST_URL = 'index.html'; // ← 本番TOPのURL/パスに変更

/* ===== タイムライン =====
   T=0s     : ダミー画面表示のみ
   T=3.0s   : クラッシュ演出開始（bars/scan/cracks）
   T=4.2s   : エラーポップ生成開始（徐々に），10個
   生成完了 : 少し待って最終確認モーダル
*/
const T_GLITCH = 3000;              // クラッシュ開始
const T_POPUP_START_DELAY = 1200;   // クラッシュ→ポップまで
const ERR_TOTAL = 10;               // 生成する小エラー数
const ERR_INTERVAL = 380;           // 1個ずつ出る間隔(ms)

setTimeout(() => {
  document.body.classList.add('glitch-on');

  // 1.2秒後から小エラーを徐々に増殖
  setTimeout(() => rampErrors(ERR_TOTAL, ERR_INTERVAL), T_POPUP_START_DELAY);

}, T_GLITCH);

/* ===== 小エラーを徐々に出す（傾き無し） ===== */
function rampErrors(total=10, interval=380){
  let count = 0;
  const timer = setInterval(()=>{
    count++;
    createErrorWin(
      120 + Math.random()*(innerWidth - 240),
      100 + Math.random()*(innerHeight - 200)
    );
    if(count >= total){ clearInterval(timer);
      setTimeout(showFinalModal, 900); // 生成し終えたら少し間を置いて確認
    }
  }, interval);
}

/* Win98風エラー */
function createErrorWin(x, y){
  const el = document.createElement('div');
  el.className = 'err98';
  el.style.left = x + 'px';
  el.style.top  = y + 'px';
  el.innerHTML = `
    <div class="title">System Error</div>
    <div class="inner">
      <div class="row">
        <div class="xmark">×</div>
        <div>
          <div>Runtime error.</div>
          <div>Press Ok to Continue.</div>
          <div>Press Cancel to Quit.</div>
        </div>
      </div>
      <div class="btnbar">
        <button class="btn98">OK</button>
        <button class="btn98 close">Cancel</button>
      </div>
    </div>`;
  document.body.appendChild(el);
  el.querySelector('.close').addEventListener('click', ()=> el.remove());
  // 画面外はみ出し補正
  const r = el.getBoundingClientRect();
  if(r.right > innerWidth) el.style.left = (innerWidth - r.width/2 - 8) + 'px';
  if(r.bottom > innerHeight) el.style.top = (innerHeight - r.height/2 - 8) + 'px';
  return el;
}

/* 最終モーダル */
function showFinalModal(){
  const m = document.getElementById('popup');
  m.classList.add('show');
  m.setAttribute('aria-hidden','false');
}
document.getElementById('ok').addEventListener('click', ()=> location.href = DEST_URL);
document.getElementById('cancel').addEventListener('click', ()=> {
  document.getElementById('popup').classList.remove('show');
});
</script>
</body>
</html>
